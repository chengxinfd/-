# 错题集第二章

#### 1.单片机IO口开漏输出和推挽输出有什么区别？

> **开漏输出：**开漏输出只能输出低电平，如果要输出高电平必须通过上拉电阻才能实现。就类似于三极管的集电极输出。
>
> **推挽输出：**推挽输出既可以输出低电平，也可以输出高电平，可以直接驱动功耗不大的数字器件。导通损耗小、效率高、既提高电路的负载能力，又提高开关速度。

拓展：STM32的8种GPIO输入输出模式

> **①浮空输入**：浮空输入模式下，I/O端口的电平信号直接进入输入数据寄存器。也就是说，I/O的电平状态是不确定的，完全由外部输入决定；如果在该引脚悬空（在无信号输入）的情况下，读取该端口的**电平是不确定的。**
>
> **②上拉输入**：上拉输入模式下，I/O端口的电平信号直接进入输入数据寄存器。但是在I/O端口悬空（在无信号输入）的情况下，输入端的电平可以**保持在高电平**；并且在I/O端口输入为低电平的时候，输入端的电平也还是低电平。
>
> **③下拉输入**：下拉输入模式下，I/O端口的电平信号直接进入输入数据寄存器。但是在I/O端口悬空（在无信号输入）的情况下，输入端的电平可以**保持在低电平**；并且在I/O端口输入为高电平的时候，输入端的电平也还是高电平。
>
> **④模拟输入**：模拟输入模式下，I/O端口的模拟信号（电压信号，而非电平信号）直接模拟输入到片上外设模块，比如ADC模块等等。
>
> **⑤开漏输出：**开漏输出模式下，通过设置位设置/清除寄存器或者输出数据寄存器的值，途经N-MOS管，最终输出到I/O端口。这里要注意N-MOS管，**当设置输出的值为高电平的时候，N-MOS管处于关闭状态，此时I/O端口的电平就不会由输出的高低电平决定，而是由I/O端口外部的上拉或者下拉决定；当设置输出的值为低电平的时候，N-MOS管处于开启状态，此时I/O端口的电平就是低电平。**同时，I/O端口的电平也可以通过输入电路进行读取；注意，I/O端口的电平不一定是输出的电平。
>
> **⑥开漏复用输出：**输出的高低电平的来源，不是让CPU直接写输出数据寄存器，取而代之利用片上外设模块的复用功能输出来决定的。
>
> **⑦推挽输出：**推挽输出模式下，通过设置位设置/清除寄存器或者输出数据寄存器的值，途经P-MOS管和N-MOS管，最终输出到I/O端口。这里要注意P-MOS管和N-MOS管，当设置输出的值为高电平的时候，P-MOS管处于开启状态，N-MOS管处于关闭状态，此时I/O端口的电平就由P-MOS管决定：高电平；当设置输出的值为低电平的时候，P-MOS管处于关闭状态，N-MOS管处于开启状态，此时I/O端口的电平就由N-MOS管决定：低电平。同时，I/O端口的电平也可以通过输入电路进行读取；注意，此时I/O端口的电平一定是输出的电平。

#### 2.单片机里定时器有什么作用和优势？

> ①作用：计数，延时，输入捕获，输出比较（输出PWM），产生中断
>
> ②优势：不需要CPU参与，精确

#### 3.同步通信和异步通信的区别

> 同步通信需要保持相同的时钟频率，发送端发送一帧，接收端接收一帧
>
> 异步通信不需要知道数据什么时候会到达，不需要保持相同的时钟频率，通常以起始位和结束位来判断

#### 4.什么是中断？

> 在CPU正常执行程序时，因外部或者内部事件或程序使得CPU暂停工作，CPU去处理中断子程序中的任务，待中断子程序中的任务处理完之后，在继续执行程序
>
> 中断处理过程：
>
> ①保护现场，将当前位置的PC地址压栈
>
> ②跳转到中断服务程序中，执行中断服务函数
>
> ③回复现场，将栈顶的值回送给PC
>
> ④跳转到被中断的位置开始执行下一个指令

